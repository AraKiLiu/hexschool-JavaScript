(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37b5216d"],{"99af":function(t,a,e){"use strict";var c=e("23e7"),i=e("d039"),o=e("e8b5"),n=e("861d"),s=e("7b0b"),r=e("50c4"),d=e("8418"),u=e("65f0"),p=e("1dde"),l=e("b622"),h=e("2d00"),f=l("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",v=h>=51||!i((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),b=p("concat"),y=function(t){if(!n(t))return!1;var a=t[f];return void 0!==a?!!a:o(t)},C=!v||!b;c({target:"Array",proto:!0,forced:C},{concat:function(t){var a,e,c,i,o,n=s(this),p=u(n,0),l=0;for(a=-1,c=arguments.length;a<c;a++)if(o=-1===a?n:arguments[a],y(o)){if(i=r(o.length),l+i>g)throw TypeError(m);for(e=0;e<i;e++,l++)e in o&&d(p,l,o[e])}else{if(l>=g)throw TypeError(m);d(p,l++,o)}return p.length=l,p}})},fc59:function(t,a,e){"use strict";e.r(a);var c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-6 bg-white py-5",staticStyle:{"min-height":"calc(100vh - 56px - 76px)"}},[t._m(0),t._l(t.cart,(function(a){return e("div",{key:a.id,staticClass:"d-flex mt-4 bg-light"},[e("img",{staticStyle:{width:"120px",height:"120px","object-fit":"cover"},attrs:{src:a.product.imageUrl[0],alt:""}}),e("div",{staticClass:"w-100 p-3 position-relative"},[e("a",{staticClass:"position-absolute",staticStyle:{top:"16px",right:"16px"},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.removeCartItem(a.product.id)}}},[e("i",{staticClass:"fas fa-times"})]),e("p",{staticClass:"mb-0 font-weight-bold"},[t._v(t._s(a.product.title))]),e("p",{staticClass:"mb-1 text-muted",staticStyle:{"font-size":"14px"}},[t._v(t._s(a.product.content))]),e("div",{staticClass:"d-flex justify-content-between align-items-center w-100"},[e("div",{staticClass:"input-group w-50 align-items-center"},[e("div",{staticClass:"input-group-prepend pr-1"},[e("a",{attrs:{href:"#",disabled:1===a.quantity},on:{click:function(e){return e.preventDefault(),t.quantityUpdata(a.product.id,a.quantity-1)}}},[e("i",{staticClass:"fas fa-minus"})])]),e("input",{staticClass:"form-control border-0 text-center my-auto\n               shadow-none bg-light px-0",attrs:{type:"text",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1"},domProps:{value:a.quantity},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.quantityUpdata(a.product.id,e.target.value)}}}),e("div",{staticClass:"input-group-append pl-1"},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.quantityUpdata(a.product.id,a.quantity+1)}}},[e("i",{staticClass:"fas fa-plus"})])])]),e("p",{staticClass:"mb-0 ml-auto"},[t._v("NT$"+t._s(a.product.price))])])])])})),e("div",{staticClass:"d-flex justify-content-between mt-4"},[e("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("總計")]),e("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v("NT$"+t._s(t.cartTotal))])]),e("router-link",{staticClass:"btn btn-dark btn-block mt-4 rounded-0 py-3",attrs:{to:"/checkout"}},[t._v(" 結帳 ")])],2)])],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"d-flex justify-content-between"},[e("h2",{staticClass:"mt-2"},[t._v("購物清單")])])}],o=(e("99af"),e("4160"),e("159b"),{name:"CustomerOrders",data:function(){return{products:[],tempProduct:{num:0,imageUrl:[]},status:{loadingItem:""},form:{name:"",email:"",tel:"",address:"",payment:"",message:""},cart:{},cartTotal:0,coupon:{},isLoading:!1,coupon_code:""}},created:function(){this.getProducts(),this.getCart()},methods:{getProducts:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("9cc644ce-dcbb-47ce-a1c2-55131daa05a0","/ec/products?page=").concat(a);this.$http.get(e).then((function(a){t.products=a.data.data,console.log(t.products),t.isLoading=!1}))},getDetailed:function(t){var a=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("9cc644ce-dcbb-47ce-a1c2-55131daa05a0","/ec/product/").concat(t);this.$http.get(e).then((function(t){a.tempProduct=t.data.data,a.$set(a.tempProduct,"num",0),$("#productModal").modal("show"),a.isLoading=!1}))},getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("9cc644ce-dcbb-47ce-a1c2-55131daa05a0","/ec/shopping");this.$http.get(a).then((function(a){t.cart=a.data.data,console.log(t.cart),t.cartTotal=0,t.cart.forEach((function(a){t.cartTotal+=a.product.price*a.quantity})),t.isLoading=!1}))},quantityUpdata:function(t,a){var e=this;if(!(a<=0)){this.isLoading=!0;var c="".concat("https://course-ec-api.hexschool.io","/api/").concat("9cc644ce-dcbb-47ce-a1c2-55131daa05a0","/ec/shopping"),i={product:t,quantity:a};this.$http.patch(c,i).then((function(){e.isLoading=!1,e.getCart()}))}},removeCartItem:function(t){var a=this;this.isLoading=!0;var e="".concat("https://course-ec-api.hexschool.io","/api/").concat("9cc644ce-dcbb-47ce-a1c2-55131daa05a0","/ec/shopping/").concat(t);this.$http.delete(e).then((function(){a.isLoading=!1,a.$bus.$emit("get-cart"),a.getCart()}))},addCoupon:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io","/api/").concat("9cc644ce-dcbb-47ce-a1c2-55131daa05a0","/ec/coupon/search");this.$http.post(a,{code:this.coupon_code}).then((function(a){t.coupon=a.data.data,t.isLoading=!1})).catch((function(a){var e=a.response.data.errors;if(e)e.code.forEach((function(a){t.$bus.$emit("message:push","加入失敗 ".concat(a),"danger")})),t.isLoading=!1;else{var c=a.response.data.message;t.$bus.$emit("message:push","加入失敗 ".concat(c),"danger"),t.isLoading=!1}}))}}}),n=o,s=e("2877"),r=Object(s["a"])(n,c,i,!1,null,null,null);a["default"]=r.exports}}]);
//# sourceMappingURL=chunk-37b5216d.6edbadd6.js.map